!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var e=function(e){return void 0!==e&&e===e.window},t=function(){return"undefined"!=typeof window},n=function(e){return"array"===k(e)},r=function(t){var n=!!t&&"length"in t&&t.length,r=k(t);return"function"!==r&&!e(t)&&("array"===r||0===n||"number"==typeof n&&n>0&&n-1 in t)},o=function(e,t){return n(e)&&(e=e.concat(t)),e},i=function(e){return Array.prototype.slice.apply(e)},u=function(e){throw new Error(e)},c=function(e,t){x(e)||x(t)?console.error(e):console.error(e,t)},a=function(e,t){x(e)||x(t)?console.warn(e):console.warn(e,t)},f=function(e,t){x(e)||x(t)?console.info(e):console.info(e,t)},l=function(e,t){x(e)||x(t)?console.log(e):console.log(e,t)},s=Object.freeze({exit:u,error:c,warn:a,info:f,log:l}),b=function(e){return"function"===k(e)},p=function(e){try{return new Function("return "+e)()}catch(e){u(e)}},d=function(e){return"object"===k(e)},m=function(e,t){return Object.keys(e).indexOf(t)>-1},v=function(e,t){return P(t,function(t,n){e[t]=n}),e},y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error","[object Symbol]":"symbol"},g=_.toString,h=_.hasOwnProperty,O=Object.getPrototypeOf,w=h.toString,j=w.call(Object),$=function e(t,n){try{if(n=n||[],!t||!n||n.length<=0)return t;var r=t[n.shift()];return n.length>0?e(r,n):r}catch(e){return""}},k=function(e){return null===e?e+"":"object"===(void 0===e?"undefined":y(e))||"function"==typeof e?_[g.call(e)]||"object":void 0===e?"undefined":y(e)},x=function(e){if(void 0===e||null===e||""===e||void 0===e)return!0;if(n(e)||d(e)){var t=0;for(var r in e)t++;if(t<=0)return!0}return!1},S=function(e,t,n){if(n=n||"",e=d(e)?e:{},x(t)||d(t))return n;var r=t.split("."),o=$(e,r);return x(o)?n:o},P=function(e,t){var n=void 0,o=0;if(r(e))for(n=e.length;o<n&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},M=function(e,t){var n=void 0;if(r(e))for(var o=(n=e.length)-1;o>=0&&!1!==t.call(e[o],o,e[o]);o--);else{var i=[];P(e,function(e,t){i.push(e)}),i.sort(function(e,t){return t-e});var u=function(t){var n={};return P(e,function(e,r){if(e.toString()===t.toString())return n=r,!1}),n};P(i,function(e,n){if(!1===t.call(u(n),n,u(n)))return!1})}return e},z=function(e){try{return Object.seal(e)}catch(t){return e}},E=function(e){try{return Object.freeze(e)}catch(t){return e}},C=function(e){try{return Object.preventExtensions(e)}catch(t){return e}},J=function(e){var t=void 0,n=void 0;return!(!e||"[object Object]"!==g.call(e))&&(!(t=O(e))||"function"==typeof(n=h.call(t,"constructor")&&t.constructor)&&w.call(n)===j)},A=function e(t){var r=void 0,o=void 0,i=void 0,u=void 0,c=void 0,a=void 0,f=t&&t[0]||{},l=1,s=t.length,p=!1;for("boolean"==typeof f&&(p=f,f=t[l]||{},l++),d(f)||b(f)||(f={}),l===s&&(f=void 0,l--);l<s;l++)if(null!==(r=t[l]))for(o in r)i=f[o],f!==(u=r[o])&&(p&&u&&(J(u)||(c=n(u)))?(c?(c=!1,a=i&&n(i)?i:[]):a=i&&J(i)?i:{},f[o]=e([p,a,u])):void 0!==u&&(f[o]=u));return f},F=function(e){return"string"===k(e)},I=function(e){for(var t=e.toLowerCase().split(" "),n=0;n<t.length;n++)t[n]=t[n][0].toUpperCase()+t[n].substring(1,t[n].length);return t.join(" ")},N=function(e){try{if(d(e)){var t=JSON.stringify(e);return!(!F(t)||!t)}}catch(e){return!1}},G=function(e){try{if(F(e)){var t=JSON.parse(e);return!(!d(t)||!t)}}catch(e){return!1}},Z=function(e){var t={};try{t=G(e)?JSON.parse(e):e}catch(e){}return t},V=function(e){return N(e)?JSON.stringify(e):e},D=function(e){return"number"===k(e)},L="0123456789abcdef",T=[],K=[],q=[],B="",R="",U="",H=function e(){for(var t=["0x"],n="",r=Math.max(Math.ceil(8),t.length),o=Math.min(2*r,24),i=0;i<24;i++)t.push(L.substr(Math.floor(16*Math.random()),1));return t[r]=L.substr(Math.ceil(Math.random()*L.length),1),t[o]=L.substr(3&t[o]|8,1),n=t.join(""),T.indexOf(n)>-1?e():(T.push(n),n)},Q=function(e){return T.indexOf(e)>-1},W=function e(){for(var t=["0x"],n="",r=Math.max(Math.ceil(8),t.length),o=Math.min(2*r,24),i=0;i<24;i++)t.push(L.substr(Math.floor(16*Math.random()),1));return t[r]=L.substr(Math.ceil(Math.random()*L.length),1),t[o]=L.substr(3&t[o]|8,1),n=t.join(""),K.indexOf(n)>-1?e():(K.push(n),n)},X=function(e){return K.indexOf(e)>-1},Y=function e(){for(var t=["0x"],n="",r=Math.max(Math.ceil(32/3),t.length),o=Math.min(2*r,32),i=0;i<32;i++)t.push(L.substr(Math.floor(16*Math.random()),1));return t[r]=L.substr(Math.ceil(Math.random()*L.length),1),t[o]=L.substr(3&t[o]|8,1),n=t.join(""),q.indexOf(n)>-1?e():(q.push(n),n)},ee=function(e){return q.indexOf(e)>-1},te=function(){if(x(B)){for(var e=["0x"],t=0;t<12;t++)e.push(L.substr(Math.floor(16*Math.random()),1));B=e.join("")}return B},ne=function(){if(x(R)){for(var e=["_0x"],t=0;t<8;t++)e.push(L.substr(Math.floor(16*Math.random()),1));R=e.join("")}return R},re=function(){if(x(U)){for(var e=["_0x"],t=0;t<8;t++)e.push(L.substr(Math.floor(16*Math.random()),1));U=e.join("")}return U},oe=function(e){return te()+"@"+e},ie=function(e){return(e=n(e)?e:[]).join("@")},ue=function(e,t,n){return!x(e)&&oe(n)===t},ce=function(e){return function(t){var r=[],i="",u="",c="",a="",f=[],l="";if(x(t.id)||!ee(t.id)||!ge(t)||x(_e(t,"key")))return!1;try{ge(t)&&(i=_e(t,"key"),c=_e(t,"name")),ge(e)&&(u=_e(e,"id"),a=_e(e,"name"),f=_e(e,"super_name")),r.push({id:u,name:a}),n(f)&&(r=o(r,f))}catch(e){}return P(r,function(e,t){var n=S(t,"id"),r=S(t,"name");if(oe(n)===i)return l=r,!1}),l===c}},ae=function(e){return function(t){var r=[],i="",u="",c="",a="",f=[],l="";if(x(t.id)||!Q(t.id)||!ge(t)||x(_e(t,"key")))return!1;try{ge(t)&&(i=_e(t,"key"),c=_e(t,"name")),ge(e)&&(u=_e(e,"id"),a=_e(e,"name"),f=_e(e,"super_name")),r.push({id:u,name:a}),n(f)&&(r=o(r,f))}catch(e){}return P(r,function(e,t){var n=S(t,"id"),r=S(t,"name");if(oe(n)===i)return l=r,!1}),l===c}},fe=function(e){return function(t){var r=[],i="",u="",c="",a="",f=[],l="";if(x(t.id)||!Q(t.id)||!ge(t)||x(_e(t,"key")))return!1;try{ge(t)&&(i=_e(t,"key"),c=_e(t,"name")),ge(e)&&(u=_e(e,"id"),a=_e(e,"name"),f=_e(e,"super_name")),r.push({id:u,name:a}),n(f)&&(r=o(r,f))}catch(e){}return P(r,function(e,t){var n=S(t,"id"),r=S(t,"name");if(oe(n)===i)return l=r,!1}),l===c}},le=function(e){return function(t){var n=[],r="",o="",i="";if(x(t.id)||!X(t.id)||!ge(t)||x(_e(t,"key")))return!1;try{ge(t)&&(r=_e(t,"key"),o=_e(t,"name")),ge(e)&&(n=_e(e,"protocol_name"))}catch(e){}return P(n,function(e,t){var n=S(t,"id"),o=S(t,"name");if(oe(n)===r)return i=o,!1}),i===o}},se=function(e){return function(t){var n=[],r="",o="",i="";if(x(t.id)||!X(t.id)||!ge(t)||x(_e(t,"key")))return!1;try{ge(t)&&(r=_e(t,"key"),o=_e(t,"name")),ge(e)&&(n=_e(e,"protocol_name"))}catch(e){}return P(n,function(e,t){var n=S(t,"id"),o=S(t,"name");if(oe(n)===r)return i=o,!1}),i===o}},be=function(e){return function(t){var n=[],r="",o="",i="";if(x(t.id)||!X(t.id)||!ge(t)||x(_e(t,"key")))return!1;try{ge(t)&&(r=_e(t,"key"),o=_e(t,"name")),ge(e)&&(n=_e(e,"protocol_name"))}catch(e){}return P(n,function(e,t){var n=S(t,"id"),o=S(t,"name");if(oe(n)===r)return i=o,!1}),i===o}},pe=function(e){return function(t){var n=[],r="",o="",i="";if(x(t.id)||!ee(t.id)||!ge(t)||x(_e(t,"key")))return!1;try{ge(t)&&(n=_e(t,"protocol_name")),ge(e)&&(r=_e(e,"key"),o=_e(e,"name"))}catch(e){}return P(n,function(e,t){var n=S(t,"id"),o=S(t,"name");if(oe(n)===r)return i=o,!1}),i===o}},de=function(e){return function(t,n){var r=null;return t===te()&&(r=e[n]?e[n]:null),r}},me=function(e){return function(t,n){e[t]=n}},ve=function(e){return function(t,n){return x(t)?E(A([!0,{},e])):e[t]?e[t]:n}},ye=function(e){return function(t,n){return x(t)?E(A([!0,{},e])):e[t]?e[t]:n}},_e=function(e,t){var n={};try{ge(e)&&(n=(0,e[ne()])(te(),t))}catch(e){}return n},ge=function(e){var t=!1;try{var n=e[ne()];t=b(n)}catch(e){}return t},he=function(e,t){return function(){return t+"@@"+e}},Oe=function(e){return function(){var t=Object.create(e.prototype),n=i(arguments);return n.push(re()),e.apply(t,n),t}},we=function(e){return function(){var t=Object.create(e.prototype);return e.apply(t,Array.prototype.slice.apply(arguments)),t}},je=function(e,t){return function(){return t+"@@"+e}},$e=function(e,t,n){return function(){return e+"@@"+n+"@@"+t}},ke=function(){return function(){var e="";try{ge(this)&&(e=_e(this,"name"))}catch(e){}return b(this._encoder)||u("<"+e+"> 类请实现 sl._encoder=[function]"),this._encoder()}},xe=function(e){return x(e)?e:"_get"+I(e)},Se=function(e){return x(e)?e:"_set"+I(e)},Pe=function(e){return e.replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}")},Me=function(e){return e.replace(/function\(/g,"(").replace(/\)/g,")=>")},ze=function(e){var t="",n=!1;switch(e.type){case"function":n=!0,t="function("+e.args.join(",")+"){}";break;case"object":n=!0,t="[object]";break;case"array":n=!0,t="[array]";break;case"string":n=!0,t="[string]";break;case"number":n=!0,t="[number]";break;case"class":n=!0,t=e.args;break;default:n=!0,t="[*]"}return"@optional"===e.mode&&(n=!1),{type:e.type,check:n,value:t}},Ee=function(e){return t()?e:Pe(e)},Ce=function(e,t,n){var r=S(n,"type"),o=S(n,"check"),i=S(n,"value"),u=i.replace(/[\s+]/g,"");if(!e.hasOwnProperty(t))return t+(u?"="+u:"");var c=e[t],a=c.toString(),f=k(c);if(o&&void 0!==c&&null!==c)switch(r){case"function":if("function"!==f)return t+(u?"="+u:"");if(Pe(i)!==Pe(a)||Me(Pe(i))!==Me(Pe(a)))return t+(u?"="+u:"");break;case"object":if("object"!==f)return t+(u?"="+u:"");break;case"array":if("array"!==f)return t+(u?"="+u:"");break;case"string":if("string"!==f)return t+(u?"="+u:"");break;case"number":if("number"!==f)return t+(u?"="+u:"");break;case"class":var l="",s="",b="",p="";try{ge(c)&&(l=_e(c,"key"),s=_e(c,"id"),p=_e(c,"name")),b=c.id}catch(e){}if(!ee(b)||!Q(s)||!ue(p,l,s)||ie([p,s])!==i)return t+(u?"="+u:"")}return null},Je=function(e,t){var n="function (resolve){resolve.method = function _"+e+"_(value) {if(resolve.callback) return (resolve.callback).apply(this, [value]);};}";try{var r={method:function(e){},callback:t};return p(n)(r),r.method}catch(e){u(e)}},Ae=function(e,t,r,o,i){var c=S(r,"type"),a=S(r,"value");return{configurable:!1,enumerable:!0,get:Je(c,function(){var n=this[xe(e)];return i&&b(n)?n(t):t}),set:Je(c,function(r){var f=this[Se(e)],l=!0,s=k(r);if(i&&b(f)){if(r=f(r),x(r))return!1;s=k(r)}switch(c){case"function":l=b(r);break;case"object":l=d(r);break;case"array":l=n(r);break;case"string":l=F(r);break;case"number":l=D(r);break;case"class":var p="",m="",v="",y="";try{ge(r)&&(p=_e(r,"key"),m=_e(r,"id"),y=_e(r,"name")),v=r.id}catch(e){}(l=ee(v)&&Q(m)&&ue(y,p,m)&&ie([y,m])===a)||(s=ie([y,m]),c=a)}return l||void 0===r||null===r?(t=r,!0):(u(o+"."+e+"=["+s+"] 与协议中定义的值类型必须是一致: "+o+"."+e+"=["+c+']"'),!1)})}},Fe=function(e,t,r,o,i){var c=S(r,"type"),a=S(r,"value");return{configurable:!1,enumerable:!0,get:Je(c,function(){var n=this[xe(t)];return i&&b(n)?n(e[t]):e[t]}),set:Je(c,function(r){var f=this[Se(t)],l=!0,s=k(r);if(i&&b(f)){if(r=f(r),x(r))return!1;s=k(r)}switch(c){case"function":l=b(r);break;case"object":l=d(r);break;case"array":l=n(r);break;case"string":l=F(r);break;case"number":l=D(r);break;case"class":var p="",m="",v="",y="";try{ge(r)&&(p=_e(r,"key"),m=_e(r,"id"),y=_e(r,"name")),v=r.id}catch(e){}(l=ee(v)&&Q(m)&&ue(y,p,m)&&ie([y,m])===a)||(s=ie([y,m]),c=a)}return l||void 0===r||null===r?(e[t]=r,!0):(u(o+"."+t+"=["+s+"] 与协议中定义的值类型必须是一致: "+o+"."+t+"=["+c+']"'),!1)})}},Ie=function(e,t,n,r,o){Object.defineProperty(e,t,Ae(t,n,r,o,!1))},Ne=function(e,t,n,r){return Fe(e,t,n,r,!0)},Ge=function(e,t,n,r,o,i){var u=x(n[t])?r:n;Object.defineProperty(e,t,Fe(u,t,o,i,!0))},Ze=function(e,t){return{configurable:!1,enumerable:!0,get:Je(k(e[t]),function(){var n=this[xe(t)];return b(n)?n(e[t]):e[t]}),set:Je(k(e[t]),function(n){var r=this[Se(t)];return(!b(r)||(n=r(n),!x(n)))&&(e[t]=n,!0)})}},Ve=function(e,t,n,r){var o=x(n[t])?r:n;Object.defineProperty(e,t,Ze(o,t))},De=function(e,t,n){return{configurable:!1,enumerable:!0,get:Je(k(t),function(){return t}),set:Je(k(t),function(){u("不可覆写[Final]类型的属性成员："+n+"."+e)})}},Le=function(e,t,n,r){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:Je(k(n),function(){return n}),set:Je(k(n),function(){u("不可覆写[Final]类型的属性成员："+r+"."+t)})})},Te=function(e,t,n,r,o,i,c,a){var f=S(t,"self",{}),l=S(t,"const",{}),s=S(t,"static",{}),b=!1,p=null,d=null,m=null;return P(f,function(e,t){var u=ze(t);if(u.check&&(p=x(n[e])?x(o[e])?x(r[e])?x(i[e])?Ce(n,e,u):Ce(i,e,u):Ce(r,e,u):Ce(o,e,u):Ce(n,e,u)))return b=!0,!1}),!b&&P(l,function(e,t){var n=ze(t);if(n.check&&(m=Ce(c,e,n)))return b=!0,!1}),!b&&P(s,function(e,t){var n=ze(t);if(n.check){if(d=Ce(a,e,n))return b=!0,!1;Ie(a,e,n,"static")}}),p&&u("<"+e+"> 类必须实现协议: self."+Ee(p)),m&&u("<"+e+"> 类必须实现协议: const."+Ee(m)),d&&u("<"+e+"> 类必须实现协议: static."+Ee(d)),!b},Ke=function(e,t,r,o){var i=/^[A-Z][A-Za-z0-9_]+$/g,c="function(?,?){}";e||u("没有给定类名"),F(e)||u("<"+e+"> 类名称必须是[String]类型"),i.test(e)||u("<"+e+"> 类命名称定义不规范,必须是以大写字母开头"),t||u("<"+e+"> 没有定义类结构体"),b(t)||u("<"+e+"> 类结构体必须是[Function]类型");var a=t.toString().replace(/[\s+]/g,"").replace(/\{(.*)+\}$/g,"{}").replace(/\((.*)\)/g,"(?,?)");return c!==a&&u("<"+e+"> 类结构体定义不规范,格式必须是: "+c),r&&(b(r)||u("<"+e+"> 类继承的结构体必须是[Function]类型"),(x(r.name)||x(r.id)||!Q(r.id)||!ge(r)||x(_e(r,"key")))&&u("<"+e+"> 类继承的结构体不规范"),b(r)||u("<"+e+"> 类继承的结构体不规范,格式必须是: "+c)),o&&(o=n(o)?o:[o],P(o,function(t,n){b(n)||u("<"+e+"> 协议的结构体必须是[function]类型"),(x(n.name)||x(n.id)||!X(n.id)||!ge(n)||x(_e(n,"key")))&&u("<"+e+"> 协议的结构体不规范"),b(n)||u("<"+e+"> 协议的结构体不规范,格式必须是: "+c)})),!0},qe=["class_name","protocol_name","super_name","prototype","constructor","id",ne(),"setStatic","getStatic","getConst","instanceOf","extendOf","classOf","protocolOf","apply","bind","call","caller","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","valueOf","__proto__","$class_name","$super_name","$protocol_name","$prototype","$constructor","$id","$"+ne(),"$setStatic","$getStatic","$getConst","$instanceOf","$extendOf","$classOf","$protocolOf","$apply","$bind","$call","$caller","$hasOwnProperty","$isPrototypeOf","$propertyIsEnumerable","$toLocaleString","$valueOf","$__proto__"],Be=["class_name","protocol_name","super_name","prototype","constructor","id",ne(),"setStatic","getStatic","getConst","instanceOf","extendOf","classOf","protocolOf","apply","bind","call","caller","toSource","toString","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","valueOf","__proto__","$class_name","$super_name","$protocol_name","$prototype","$constructor","$id","$"+ne(),"$setStatic","$getStatic","$getConst","$instanceOf","$extendOf","$classOf","$protocolOf","$apply","$bind","$call","$caller","$toSource","$toString","$hasOwnProperty","$isPrototypeOf","$propertyIsEnumerable","$toLocaleString","$valueOf","$__proto__"],Re=function(e,t){var n=/^[a-zA-Z0-9_$]+$/i,r=[],o=[],i=[],c="",a="prototype",f=!1,l=!1,s=!1,b=!1,p=!1,d=t.self,m=t.prototype,v=t.static,y=t.const;return P(m,function(e,t){if("_construct"===e)return c=e,a="prototype",l=!0,!1;if("$_construct"===e)return c=e,a="prototype",f=!0,!1;if(qe.indexOf(e)>-1)return c=e,a="prototype",s=!0,!1;if(Ue(e)){var n=He(e);if(r.indexOf(n)>-1)return c=n,a="prototype",p=!0,!1;r.push(n)}else if(r.indexOf(e)>-1)return c=e,a="prototype",p=!0,!1}),p||s||f||l||P(d,function(e,t){if("$_construct"===e)return c=e,a="self",f=!0,!1;if(qe.indexOf(e)>-1)return c=e,a="self",s=!0,!1;if(Ue(e)){var n=He(e);if(r.indexOf(n)>-1)return c=n,a="self",p=!0,!1;r.push(n)}else if(r.indexOf(e)>-1)return c=e,a="self",p=!0,!1}),p||s||f||l||P(y,function(e,t){return n.test(e)?Be.indexOf(e)>-1?(c=e,a="const",s=!0,!1):o.indexOf(e)>-1?(c=e,a="const",p=!0,!1):void 0:(c=e,a="const",b=!0,!1)}),p||s||f||l||b||P(v,function(e,t){return Be.indexOf(e)>-1?(c=e,a="static",s=!0,!1):i.indexOf(e)>-1?(c=e,a="static",p=!0,!1):void 0}),l?(u(e+" 类中的 ["+a+"] 成员名称不允许是："+c),!1):s?(u(e+" 类中的 ["+a+"] 成员名称不可是关键词："+c),!1):p?(u(e+" 类中的 ["+a+"]: "+c+" 是final类型不可覆写"),!1):f?(u(e+" 类中的 ["+a+"]: "+c+" 构造函数不允许设置为final类型！"),!1):!b||(u(e+" 类中的 ["+a+"]: "+c+" 名称必须[a-zA-Z0-9_$]方式命名"),!1)},Ue=function(e){return"_construct"!==e&&0===e.indexOf("$")},He=function(e){return e="_construct"!==e&&0===e.indexOf("$")?e.replace("$",""):e},Qe=function(e,t,n){var r={0:{_construct:function(){},_encoder:function(){return{}},_decoder:function(){}}},o=0,c=!1,a=i(n).filter(function(e,t){return!(!x(e)&&re()===e.toString())||(c=!0,!1)}),f={},l={},s={},p=S(e,"constructor_list",[]),d=S(e,"name"),v=Y(),y=S(e,"id"),_={},g=S(e.vh_data,"protocol.self",{}),h=["_encoder","toString"],O=["_decoder","_construct"],w=[],j={};M(p,function(n,i){var c=r[o++],a={},f={},s=S(i,"constructor",{}),p=S(i,"self",{}),d=S(i,"prototype",{}),v=S(i,"top_prototype",{});b(s)&&s.apply(t,[t,z(e.const),e.static,C(c),l]),!x(j)&&x(v)||(j=v),P(p,function(e,n){var r=He(e);if(t.propertyIsEnumerable(e)&&O.indexOf(r)<0){if(w.indexOf(r)>-1)return u("不可覆写[Final]类型的属性成员：self."+r),!1;Ue(e)&&(Le(t,r,t[e],"self"),delete t[e],w.push(r))}b(t[r])?t.propertyIsEnumerable(r)&&(h.indexOf(r)>-1?Object.defineProperty(a,r,{value:t[r],writable:!1,enumerable:!0,configurable:!1}):Ue(e)&&O.indexOf(r)<0?a[r]={value:t[e],writable:!1,enumerable:!0,configurable:!1}:a[r]=t[r]):Object.defineProperty(a,r,{configurable:!0,enumerable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}),P(d,function(e,n){if("_construct"!==e){var r=He(e);if(w.indexOf(r)>-1)return u("不可覆写[Final]类型的属性成员：prototype."+r),!1;if(h.indexOf(r)>-1)Object.defineProperty(f,e,{value:x(t[e])?l[e]:t[e],writable:!1,enumerable:!0,configurable:!1});else if(Ue(e)&&O.indexOf(r)<0)Le(f,r,x(t[e])?l[e]:t[e],"prototype"),w.push(r);else if(m(g,e)){var o=ze(S(g,e,{}));Ge(f,e,t,l,o,"prototype")}else Ve(f,r,t,l)}}),f.__proto__=v,a.__proto__=f,r[o]=a}),P(l,function(e,t){var n=He(e);if(h.indexOf(n)>-1)s[e]={value:t,writable:!1,enumerable:!0,configurable:!1};else if(Ue(e)&&O.indexOf(n)<0)s[n]=De(n,t,"prototype");else if(m(g,e)){var r=ze(S(g,e,{}));s[n]=Ne(l,e,r,"prototype")}else s[e]=Ze(l,e)}),(f={id:{value:v,writable:!1,enumerable:!1,configurable:!1},setStatic:{value:me(e.static),writable:!1,enumerable:!1,configurable:!1},getStatic:{value:ve(e.static),writable:!1,enumerable:!1,configurable:!1},getConst:{value:ye(e.const),writable:!1,enumerable:!1,configurable:!1},toString:{value:$e(v,y,d),writable:!0,enumerable:!1,configurable:!0},toJSON:{value:ke(),writable:!1,enumerable:!1,configurable:!1},name:{value:d,writable:!1,enumerable:!1,configurable:!1},class_name:{value:d,writable:!1,enumerable:!1,configurable:!1},classOf:{value:ae(t),writable:!1,enumerable:!1,configurable:!1},protocolOf:{value:se(t),writable:!1,enumerable:!1,configurable:!1},kindInstance:{value:!0,writable:!1,enumerable:!1,configurable:!1}})[ne()]={value:de(e.vh_data),writable:!1,enumerable:!1,configurable:!1},Object.defineProperties(_,f),_.__proto__=j,t.__proto__=Object.freeze(Object.create(_,s)),P(g,function(e,n){var r=He(e);if(w.indexOf(r)<0&&t.propertyIsEnumerable(e)&&O.indexOf(r)<0)if(Ue(e)){var o=ze(S(g,e,{}));Ie(t,r,t[e],o,"self"),delete t[e]}else{var i=ze(S(g,e,{}));Ie(t,r,t[r],i,"self")}}),c?(b(t._decoder)||u("<"+d+"> 类请实现 sl._encoder=[function]"),a.length>0&&(a[0]=Z(V(a[0]))),t._decoder.apply(t,a)):t._construct&&t._construct.apply(t,a),t._decoder&&delete t._decoder,t._construct&&delete t._construct,P(r,function(e,t){t._decoder&&delete t._decoder,t._construct&&delete t._construct,E(t)}),w=[]},We=function(e,t){},Xe=function(e,t,r,o,i){var c={name:e,id:"",key:"",super_name:[],protocol_name:[],constructor:t,constructor_list:[],self:{},prototype:{},super_self:{},super_prototype:{},const:{},static:{},protocol:{}},a=function(){},f=b(i)?new i:new function(){},l=void 0,d=H(),m={},y={},_={},g={},h={},O={},w={},j=[],$=[],k={},S=[{constructor:t,top_prototype:f,self:m,prototype:y,const:h,static:w}];if(!Ke(e,t,r,o))return!1;if(!x(r)){var M=_e(r,"constructor_list"),z=_e(r,"self"),C=_e(r,"super_self"),J=_e(r,"prototype"),A=_e(r,"super_prototype"),F=_e(r,"const"),I=_e(r,"static"),N=_e(r,"name"),G=_e(r,"id"),Z=_e(r,"super_name"),V=_e(r,"protocol_name"),D=_e(r,"protocol");P(M,function(e,t){S.push(t)}),P(C,function(e,t){_[e]=t}),P(A,function(e,t){g[e]=t}),P(F,function(e,t){h[e]=t}),P(I,function(e,t){w[e]=t}),P(Z,function(e,t){j.push(t)}),P(V,function(e,t){$.push(t)}),P(D,function(e,t){k[e]=t}),P(z,function(e,t){!_[e]&&(_[e]=t)}),P(J,function(e,t){!g[e]&&(g[e]=t)}),j.unshift({id:G,name:N})}if(x(o)||(o=n(o)?o:[o],P(o,function(e,t){P(_e(t,"implement_list"),function(e,t){x(k[e])&&(k[e]={}),k[e]=v(k[e],t)}),$.push({id:_e(t,"id"),name:_e(t,"name")})})),t(m,h,w,Object.freeze({}),y),!Re(e,{self:m,const:h,static:w,prototype:y}))return!1;if(!Te(e,k,m,_,y,g,h,w))return!1;c.constructor_list=S,c.self=m,c.super_self=_,c.prototype=y,c.super_prototype=g,c.const=h,c.static=w,c.name=e,c.id=d,c.key=oe(d),c.super_name=j,c.protocol_name=$,c.protocol=k;var L={constructor_list:S,prototype:y,self:m,const:h,static:w,name:e,id:d,super_name:j,vh_data:c,klass:function(){},_:{_:Qe},console:s},T="function (GV, _){GV.klass = function "+e+"() {_._._(GV, this, arguments);};}";try{p(T)(L,L),a=L.klass}catch(e){u(e)}return P(h,function(e,t){O[e]={value:t,writable:!1,enumerable:!1,configurable:!1}}),l={constructor:{value:t,writable:!1,enumerable:!1,configurable:!1},name:{value:e,writable:!1,enumerable:!1,configurable:!1},class_name:{value:e,writable:!1,enumerable:!1,configurable:!1},super_name:{value:j,writable:!1,enumerable:!1,configurable:!1},protocol_name:{value:$,writable:!1,enumerable:!1,configurable:!1},id:{value:d,writable:!1,enumerable:!1,configurable:!1},setStatic:{value:me(w),writable:!1,enumerable:!1,configurable:!1},getStatic:{value:ve(w),writable:!1,enumerable:!1,configurable:!1},getConst:{value:ye(h),writable:!1,enumerable:!1,configurable:!1},toString:{value:he(d,e),writable:!1,enumerable:!1,configurable:!1},extendOf:{value:fe(a),writable:!1,enumerable:!1,configurable:!1},instanceOf:{value:ce(a),writable:!1,enumerable:!1,configurable:!1},protocolOf:{value:le(a),writable:!1,enumerable:!1,configurable:!1},new:{value:we(a),writable:!1,enumerable:!1,configurable:!1},renew:{value:Oe(a),writable:!1,enumerable:!1,configurable:!1},kindClass:{value:!0,writable:!1,enumerable:!1,configurable:!1}},l[ne()]={value:de(c),writable:!1,enumerable:!1,configurable:!1},Object.defineProperties(a,l),w.__proto__=a.__proto__,a.__proto__=E(Object.create(w,O)),a.prototype=f,Object.freeze(a)},Ye=function(e){var t=null;return P(e,function(e,n){if(x(S(n,"type"))&&x(S(n,"model")))return t=e,!1}),t},et=function(e,t,r,o,i){var c=/^[A-Z][A-Za-z0-9_]+$/g,a=/^[A-Z_$]+$/i,f=["$_construct","$_encoder","$_decoder","$toString"],l=[],s=!1,p=!1,m="",v=!1,y=!1;if(e||u("没有给定接口名"),F(e)||u("<"+e+"> 协议名称必须是string类型"),c.test(e)||u("<"+e+"> 协议命名定义不规范,必须是以大写字母开头"),t){d(t)||u("<"+e+"> 协议中“self”定义的结构体必须是[Object]类型"),N(t)||u("<"+e+"> 协议中“self”定义的结构体的格式必须是: {}");var _=Ye(t);if(_&&u("<"+e+"> 协议中“self”定义的结构体的值类型不合法,类型必须是: ProtocolType -> "+_),"{}"!==JSON.stringify(t).replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}")&&u("<"+e+"> 协议中“self”定义的结构体不规范,格式必须是: {}"),P(t,function(e,t){if(f.indexOf(e)>-1)return m=e,p=!0,!1;if(qe.indexOf(e)>-1)return m=e,s=!0,!1;if(Ue(e)){var n=He(e);if(l.indexOf(n)>-1)return m=n,v=!0,!1;l.push(n)}else if(l.indexOf(e)>-1)return m=e,v=!0,!1}),s)return u("<"+e+"> 协议中“self”定义的名称不可使用关键："+m),!1;if(p)return u("<"+e+"> 协议中“self”定义的“"+m+"”构造函数不允许设置为[Final]类型"),!1;if(v)return u("<"+m+"> 协议中“self”定义的名称已存在"),!1}if(o){d(o)||u("<"+m+"> 协议中“static”定义的结构体必须是[Object]类型"),N(o)||u("<"+e+"> 协议中“static”定义的结构体的格式必须是: {}"),"{}"!==JSON.stringify(o).replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}")&&u("<"+e+"> 协议中“static”定义的结构体不规范,格式必须是: {}");var g=Ye(o);g&&u("<"+e+"> 协议中“static”定义的结构体的值类型不合法,类型必须是: ProtocolType -> "+g)}if(r){d(r)||u("<"+e+"> 协议中“const”定义的结构体必须是[Object]类型"),N(r)||u("<"+e+"> 协议中“const”定义的结构体的格式必须是: {}"),"{}"!==JSON.stringify(r).replace(/[\s+]/g,"").replace(/\{(.*)\}/g,"{}")&&u("<"+e+"> 协议中“const”定义的结构体不规范,格式必须是: {}");var h=Ye(r);if(h&&u("<"+e+"> 协议中“const”定义的结构体的值类型不合法,类型必须是ProtocolType -> "+h),P(r,function(e,t){return a.test(e)?qe.indexOf(e)>-1?(m=e,s=!0,!1):void 0:(m=e,y=!0,!1)}),s)return u("<"+e+"> 协议中“const”定义的名称不可使用关键："+m),!1;y&&u("<"+e+"> 协议中“const”定义的名称必须全部以大写命名："+m)}return n(i)&&P(i,function(t,n){(x(n.name)||x(n.id)||!X(n.id)||!ge(n)||x(_e(n,"key")))&&u("<"+e+"> 协议继承定义的结构体不规范: "+e),b(n)||u("<"+e+"> 协议继承定义的结构体定义不规范,格式必须是: function(?,?){}")}),l=[],!0},tt=function(e,t,r){var o={name:e,id:"",key:"",super_name:[],self:{},const:{},static:{},implement_list:{}},i=function(){},u={},a=W(),f=S(t,"self",{}),l=S(t,"const",{}),b=S(t,"static",{}),d=[];if(x(r)&&(r=[])||!n(r)&&(r=[r]),et(e,f,l,b,r)){x(r)||M(r,function(e,t){var n=_e(t,"self"),r=_e(t,"const"),o=_e(t,"static"),i=_e(t,"super_name"),u=_e(t,"name"),c=_e(t,"id");P(n,function(e,t){!f[e]&&(f[e]=t)}),P(r,function(e,t){!l[e]&&(l[e]=t)}),P(o,function(e,t){!b[e]&&(b[e]=t)}),P(i,function(e,t){d.push(t)}),d.unshift({id:c,name:u})}),o.name=e,o.id=a,o.key=oe(a),o.self=f,o.const=l,o.static=b,o.super_name=d,o.implement_list={self:f,const:l,static:b};var m={self:f,const:l,static:b,name:e,id:a,super_name:d,protocol:function(){},_:{_:We},console:s},v="function (GV, _){GV.protocol = function "+e+"() {_._._(GV, this, arguments);};}";try{p(v)(m,m)}catch(e){c(e)}return i=m.protocol,u={protocol_name:{value:e,writable:!1,enumerable:!1,configurable:!1},super_name:{value:d,writable:!1,enumerable:!1,configurable:!1},id:{value:a,writable:!1,enumerable:!1,configurable:!1},toString:{value:je(a,e),writable:!1,enumerable:!1,configurable:!1},instanceOf:{value:pe(i),writable:!1,enumerable:!1,configurable:!1},extendOf:{value:be(i),writable:!1,enumerable:!1,configurable:!1},kindProtocol:{value:!0,writable:!1,enumerable:!1,configurable:!1}},u[ne()]={value:de(o),writable:!1,enumerable:!1,configurable:!1},Object.defineProperties(i,u),i.__proto__=Object.freeze({self:f,const:l,static:b}),Object.freeze(i)}},nt=function(e,t,n){return{type:e,args:n,mode:["@optional","@required"].indexOf(t)<0?"@required":t}},rt={function:function(){var e="",t=[];return P(arguments,function(n,r){0===r.indexOf("@")?e=r:t.push(r)}),Object.freeze(nt("function",e,t))},object:function(e){return Object.freeze(nt("object",e,""))},array:function(e){return Object.freeze(nt("array",e,""))},string:function(e){return Object.freeze(nt("string",e,""))},number:function(e){return Object.freeze(nt("number",e,""))},class:function(e,t){var n="",r="",o="";try{ge(t)&&(n=_e(t,"key"),r=_e(t,"id"),o=_e(t,"name"))}catch(e){}return Q(r)&&ue(o,n,r)||u("协议约定的类不合法: <"+t+">"),Object.freeze(nt("class",e,ie([o,r])))},own:function(e){return Object.freeze(nt("own",e,""))}},ot=function(e,t,n,r,o){return Xe(e,t,n,r,o)},it=function(e,t,n){return tt(e,t,n)};!function(){return"function"==typeof Object.defineProperty}()?u("当前版本不支持JsKlass，请使用IE8版本以上的平台"):(Object.defineProperty(window,"JsKlass",{value:E({DefClass:E(ot),DefProtocol:E(it),ProtocolType:E(rt),Global:{}}),writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(window,"JK",{value:E({DefClass:E(ot),DefProtocol:E(it),ProtocolType:E(rt),Global:{}}),writable:!1,enumerable:!1,configurable:!1}))});
